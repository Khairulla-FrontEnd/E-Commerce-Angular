<section id="profile">
    <div class="container">
        <div class="d-flex align-items-center flex-wrap justify-content-between">
            <div class="d-flex gap-1 my-5 title text-nowrap pe-2">
                <a routerLink="/home" style="color:gray !important; text-wrap:nowrap;">Home /</a>
                <p>My Account</p>
            </div>
            @if(!isLoading()){
                <p class="title">Welcome! <span class="text-danger">{{ data()?.name }}</span></p>
            }@else {
                <p-skeleton
                width="150px"
                />
            }
        </div>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="shadow-lg rounded-1 p-4">
            <h1 class="heading fs-5 fw-semibold text-danger mb-4">Edit your profile</h1>
            <div class="row">
                <div class="col-sm mb-sm-0 mb-3">
                    <p class="title">Name</p>
                    <input class="form-control-plaintext p-2 rounded-1 bg-secondary" formControlName="name" [placeholder]="data()?.name" type="text" [readOnly]="!click">
                </div>
                <div class="col-sm mb-3">
                    <p class="title">Email</p>
                    <input class="form-control-plaintext p-2 rounded-1 bg-secondary" formControlName="email" type="text" [placeholder]="data()?.email" [readOnly]="!click" >
                </div>
                <div class="w-100"></div>
                <div class="col">
                    <p class="title">Password Changes</p>
                    <input class="form-control-plaintext p-2 rounded-1 bg-secondary mb-4" formControlName="currentPassword" type="text" placeholder="Current Password" [readOnly]="!click">
                    <input class="form-control-plaintext p-2 rounded-1 bg-secondary mb-4" formControlName="newPassword" type="text" placeholder="New Password" [readOnly]="!click">
                    <input class="form-control-plaintext p-2 rounded-1 bg-secondary" formControlName="confirmPassword" type="text" placeholder="Confirm Password" [readOnly]="!click">
                </div>
            </div>
            <div class="d-flex justify-content-end mt-4">
                @if(click){
                    <button class="btn btn-light rounded-1 px-4 me-3" (click)="setClick()" type="button">Cancel</button>
                    <button class="btn btn-danger rounded-1 px-4 text-white" type="submit" [disabled]="!form.value.name && !form.value.email && !(form.value.currentPassword && form.value.newPassword && form.value.confirmPassword)">Save Changes</button>
                }@else {
                    <button class="btn btn-danger rounded-1 px-4 text-white" type="button" (click)="setClick()">Edit</button>
                }
            </div>    
        </form>
    </div>
</section>